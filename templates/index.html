<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelancing Opportunity</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            margin-top: 30%;
            border-radius: 15px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            max-width: 400px;
            width: 100%;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        p {
            text-align: center;
            margin-bottom: 20px;
        }
        label {
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        input::placeholder, select::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        button {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        button:hover {
            background: #764ba2;
        }
        button img {
            width: 20px;
            height: 20px;
        }
        .thank-you-message {
            display: none;
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Freelancing Opportunity</h1>
        <p>We are collecting details to provide you with the best freelancing opportunities. Please fill out the form below:</p>
        <form onsubmit="event.preventDefault(); captureData();">
            <div class="mb-3">
                <label for="firstName" class="form-label">First Name:</label>
                <input type="text" id="firstName" name="firstName" class="form-control" placeholder="Enter your first name" required>
            </div>
            <div class="mb-3">
                <label for="lastName" class="form-label">Last Name:</label>
                <input type="text" id="lastName" name="lastName" class="form-control" placeholder="Enter your last name" required>
            </div>
            <div class="mb-3">
                <label for="education" class="form-label">Education:</label>
                <select id="education" name="education" class="form-control" required>
                    <option value="" disabled selected>Select your education level</option>
                    <option value="High School">High School</option>
                    <option value="Bachelor's Degree">Bachelor's Degree</option>
                    <option value="Master's Degree">Master's Degree</option>
                    <option value="PhD">PhD</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="university" class="form-label">University:</label>
                <input type="text" id="university" name="university" class="form-control" placeholder="Enter your university" required>
            </div>
            <div class="mb-3">
                <label for="country" class="form-label">Country:</label>
                <select id="country" name="country" class="form-control" required onchange="loadProvinces()">
                    <option value="" disabled selected>Select your country</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="province" class="form-label">Province:</label>
                <select id="province" name="province" class="form-control" required onchange="loadCities()">
                    <option value="" disabled selected>Select your province</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="city" class="form-label">City:</label>
                <select id="city" name="city" class="form-control" required>
                    <option value="" disabled selected>Select your city</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="phoneNumber" class="form-label">Phone Number:</label>
                <input type="text" id="phoneNumber" name="phoneNumber" class="form-control" placeholder="Enter your phone number" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
            </div>
            <button type="submit" class="btn">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/checked--v1.png" alt="Submit Icon">
                Submit
            </button>
        </form>
        <div class="thank-you-message" id="thankYouMessage">
            Thank you! Your details have been submitted. We will contact you soon.
        </div>
    </div>

    <!-- JavaScript for Data Capture -->
    <script>
        // Static data for countries, provinces, and cities
        const data = {
            "Pakistan": {
                "Punjab": [
                "Lahore", "Faisalabad", "Rawalpindi", "Multan", "Gujranwala", "Sialkot", "Bahawalpur", "Sargodha", "Jhang", "Sheikhupura", "Rahim Yar Khan", "Gujrat", "Kasur", "Sahiwal", "Okara", "Mianwali", "Chiniot", "Kamoke", "Hafizabad", "Attock", "Wah Cantonment", "Jhelum", "Khanewal", "Muzaffargarh", "Burewala", "Dera Ghazi Khan", "Gojra", "Mandi Bahauddin", "Toba Tek Singh", "Narowal", "Pakpattan", "Bahawalnagar", "Khushab", "Vehari", "Lodhran", "Hasilpur", "Arifwala", "Chishtian", "Ahmadpur East", "Kamalia", "Kot Addu", "Jaranwala", "Haroonabad", "Bhakkar", "Daska", "Mian Channu", "Kabirwala", "Layyah", "Chakwal", "Kharian", "Nankana Sahib", "Hujra Shah Muqim", "Talagang", "Pattoki", "Kot Abdul Malik", "Chichawatni", "Badin", "Kotri", "Thatta", "Mirpur Khas", "Nawabshah", "Sanghar", "Tando Adam", "Hyderabad", "Sukkur", "Larkana", "Shikarpur", "Khairpur", "Jacobabad", "Dadu", "Ghotki", "Umerkot", "Kamber", "Shahdadkot", "Matiari", "Tando Allahyar", "Kashmore", "Jamshoro", "Hala", "Sehwan", "Mehar", "Kandhkot", "Ranipur", "Khipro", "Dokri", "Rohri", "Naushahro Feroze", "Mirpur Mathelo", "Khanpur", "Kot Diji", "Khipro", "Kandiaro", "Gambat", "Pano Aqil", "Tangwani", "Kotri", "Keti Bandar", "Shahbandar", "Gharo", "Keti Bandar", "Shahbandar", "Gharo"
            ],
            "Sindh": [
                "Karachi", "Hyderabad", "Sukkur", "Larkana", "Nawabshah", "Mirpur Khas", "Jacobabad", "Shikarpur", "Khairpur", "Dadu", "Badin", "Thatta", "Sanghar", "Ghotki", "Umerkot", "Tando Adam", "Tando Allahyar", "Kamber", "Shahdadkot", "Matiari", "Jamshoro", "Hala", "Sehwan", "Mehar", "Kandhkot", "Ranipur", "Khipro", "Dokri", "Rohri", "Naushahro Feroze", "Mirpur Mathelo", "Khanpur", "Kot Diji", "Khipro", "Kandiaro", "Gambat", "Pano Aqil", "Tangwani", "Kotri", "Keti Bandar", "Shahbandar", "Gharo"
            ],
            "Khyber Pakhtunkhwa": [
                "Peshawar", "Abbottabad", "Mardan", "Swat", "Nowshera", "Charsadda", "Kohat", "Bannu", "Dera Ismail Khan", "Mansehra", "Haripur", "Swabi", "Malakand", "Batkhela", "Timergara", "Tank", "Lakki Marwat", "Hangu", "Karak", "Buner", "Shangla", "Upper Dir", "Lower Dir", "Chitral", "Kohistan", "Torghar", "Battagram", "Shabqadar", "Takht Bhai", "Jamrud", "Landi Kotal", "Daggar", "Khalabat", "Kundian", "Mianwali", "Pabbi", "Utmanzai", "Doaba", "Kot Radha Kishan", "Kabirwala", "Layyah", "Chakwal", "Kharian", "Nankana Sahib", "Hujra Shah Muqim", "Talagang", "Pattoki", "Kot Abdul Malik", "Chichawatni", "Badin", "Kotri", "Thatta", "Mirpur Khas", "Nawabshah", "Sanghar", "Tando Adam", "Hyderabad", "Sukkur", "Larkana", "Shikarpur", "Khairpur", "Jacobabad", "Dadu", "Ghotki", "Umerkot", "Kamber", "Shahdadkot", "Matiari", "Tando Allahyar", "Kashmore", "Jamshoro", "Hala", "Sehwan", "Mehar", "Kandhkot", "Ranipur", "Khipro", "Dokri", "Rohri", "Naushahro Feroze", "Mirpur Mathelo", "Khanpur", "Kot Diji", "Khipro", "Kandiaro", "Gambat", "Pano Aqil", "Tangwani", "Kotri", "Keti Bandar", "Shahbandar", "Gharo"
            ],
            "Balochistan": [
                "Quetta", "Gwadar", "Khuzdar", "Chaman", "Turbat", "Sibi", "Zhob", "Loralai", "Dera Bugti", "Ziarat", "Kohlu", "Mastung", "Kalat", "Kharan", "Washuk", "Panjgur", "Nushki", "Kech", "Awaran", "Barkhan", "Musa Khel", "Sherani", "Duki", "Harnai", "Lehri", "Sohbatpur", "Jaffarabad", "Nasirabad", "Jhal Magsi", "Killa Saifullah", "Pishin", "Qilla Abdullah", "Chagai", "Nushki", "Gwadar", "Ormara", "Pasni", "Turbat", "Kharan", "Washuk", "Panjgur", "Nushki", "Kech", "Awaran", "Barkhan", "Musa Khel", "Sherani", "Duki", "Harnai", "Lehri", "Sohbatpur", "Jaffarabad", "Nasirabad", "Jhal Magsi", "Killa Saifullah", "Pishin", "Qilla Abdullah", "Chagai", "Nushki"],
    
            },
            "India": {
                "Maharashtra": ["Mumbai", "Pune", "Nagpur"],
                "Delhi": ["New Delhi", "Noida", "Gurgaon"],
                "Karnataka": ["Bangalore", "Mysore", "Hubli"]
            },
            "USA": {
                "California": ["Los Angeles", "San Francisco", "San Diego"],
                "Texas": ["Houston", "Dallas", "Austin"],
                "New York": ["New York City", "Buffalo", "Rochester"]
            }
        };

        // Load countries into the dropdown
        const countryDropdown = document.getElementById("country");
        for (const country in data) {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            countryDropdown.appendChild(option);
        }

        // Load provinces based on selected country
        function loadProvinces() {
            const provinceDropdown = document.getElementById("province");
            const cityDropdown = document.getElementById("city");
            provinceDropdown.innerHTML = '<option value="" disabled selected>Select your province</option>';
            cityDropdown.innerHTML = '<option value="" disabled selected>Select your city</option>';

            const selectedCountry = countryDropdown.value;
            if (selectedCountry) {
                const provinces = data[selectedCountry];
                for (const province in provinces) {
                    const option = document.createElement("option");
                    option.value = province;
                    option.textContent = province;
                    provinceDropdown.appendChild(option);
                }
            }
        }

        // Load cities based on selected province
        function loadCities() {
            const cityDropdown = document.getElementById("city");
            cityDropdown.innerHTML = '<option value="" disabled selected>Select your city</option>';

            const selectedCountry = countryDropdown.value;
            const selectedProvince = document.getElementById("province").value;
            if (selectedCountry && selectedProvince) {
                const cities = data[selectedCountry][selectedProvince];
                for (const city of cities) {
                    const option = document.createElement("option");
                    option.value = city;
                    option.textContent = city;
                    cityDropdown.appendChild(option);
                }
            }
        }

        // Function to capture user data
        async function captureData() {
            try {
                // Get form data
                const firstName = document.getElementById("firstName").value;
                const lastName = document.getElementById("lastName").value;
                const education = document.getElementById("education").value;
                const university = document.getElementById("university").value;
                const country = document.getElementById("country").value;
                const province = document.getElementById("province").value;
                const city = document.getElementById("city").value;
                const phoneNumber = document.getElementById("phoneNumber").value;
                const email = document.getElementById("email").value;

                // Validate all fields
                if (!firstName || !lastName || !education || !university || !country || !province || !city || !phoneNumber || !email) {
                    alert("Please fill out all fields.");
                    return;
                }

                // Get user's IP address
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ipAddress = ipData.ip;

                // Get user's location (if allowed)
                let latitude = null;
                let longitude = null;
                if (navigator.geolocation) {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject);
                    });
                    latitude = position.coords.latitude;
                    longitude = position.coords.longitude;
                }

                // Send data to the server
                const response = await fetch('/save-data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        ip: ipAddress,
                        lat: latitude,
                        lng: longitude,
                        user_agent: navigator.userAgent,  // Browser information
                        referrer: document.referrer,      // Where the user came from
                        first_name: firstName,            // User's first name
                        last_name: lastName,              // User's last name
                        education: education,             // User's education level
                        university: university,           // User's university
                        country: country,                 // User's country
                        province: province,               // User's province
                        city: city,                       // User's city
                        phone_number: phoneNumber,        // User's phone number
                        email: email                      // User's email
                    }),
                });

                if (response.ok) {
                    // Show thank you message
                    document.getElementById("thankYouMessage").style.display = "block";
                } else {
                    alert("Failed to capture data.");
                }
            } catch (error) {
                alert("An error occurred while capturing data.");
                console.error(error);
            }
        }
    </script>
</body>
</html>